<?php defined('BASEPATH') or exit('No direct script access allowed'); ?>
<?php init_head(); ?>
<div id="wrapper" class="idea_hub">
    <div class="content">
        <div class="row">
            <div class="col-md-12">
              <div class="panel_s">
                  <div class="panel-body ad_bottom_cl">
                    <div class="in_cl_maksd">
                       <div class="back_btn_swa">
                           <div class="challenge_btn_cl">
                               <a href="#" class="btn btn-info pull-left display-block">
                                   <i class="fa fa-angle-left"></i> Back
                               </a>
                           </div>
                       </div>
                   </div>
               </div>
           </div>   
       </div>
   </div>
   <div class="grid_panel details_grid_panel">
    <div class="row">
     <div class="col-lg-5 col_dif_1 col-sm-5">
        <div class="panel_s">
            <div class="panel-body panel-color ad_new_cl">
                <div class="img_card_ih">
                    <div class="points_cl">
                        <span>6</span>
                        <p>Points</p>
                    </div>
                    <div class="wrap_img_sec_grid">
                        <div class="actn_edit">
                            <div class="wrap_actn_b">
                                <a class="trash_btn_c" href="http://localhost/perfex_fresh/admin/idea_hub/challenge/2">
                                    <span><i class="fa fa-trash-o" aria-hidden="true"></i> </span> delete </a>
                                </div>
                                <div class="wrap_actn_b">
                                    <a class="pencil_btn_c" href="http://localhost/perfex_fresh/admin/idea_hub/delete_challenge/2">
                                        <span><i class="fa fa-pencil" aria-hidden="true"></i></span> edit
                                    </a>
                                </div>
                            </div>
                            <div class="rght_img_cl">
                                <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/second_baner.jpg">
                                <div class="name_ls_s countdown" data-challenge="2">
                                   <div class="timeing_heading">
                                    <p class="running_phase">
                                        Remaining time <i class="fa fa-clock-o" aria-hidden="true"></i>
                                    </p>
                                    <p class="end_phase hidden">
                                        No time left <i class="fa fa-clock-o" aria-hidden="true"></i>
                                    </p>
                                </div>
                                <div class="phase_running">
                                    <div class="w_timeing_d">
                                        <h3 class="days">2 </h3>
                                        <h5>DAY</h5>
                                    </div>
                                    <span class="dot_cl_ms">:</span>
                                    <div class="w_timeing_d">
                                        <h3 class="hours">
                                            18
                                        </h3>
                                        <h5>HOUR</h5>
                                    </div>
                                    <span class="dot_cl_ms">:</span>
                                    <div class="w_timeing_d">
                                        <h3 class="minutes">5</h3>
                                        <h5>MIN</h5>
                                    </div>
                                    <span class="dot_cl_ms">:</span>
                                    <div class="w_timeing_d">
                                        <h3 class="seconds">32</h3>
                                        <h5>SEC</h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="user_img_name">
                          <div>
                              <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/pic7.jpg" class="img-responsive" alt="Image">
                          </div>
                          <div>
                              <b>User Name</b>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="card_ih_text_data">
               <div class="wrap_boa_da">
                <h5>What is your initial challenge of this concept ?</h5>
                <ul class="list-inline no_of_initial nav nav-pills">
                    <li class="list-inline-itme" data-toggle="pill" style="background-color: #ee4b33;">
                        1
                    </li>
                    <li class="list-inline-item" data-toggle="pill" style="background-color: #ed7c04;">
                        2
                    </li>
                    <li class="list-inline-item" data-toggle="pill" style="background-color: #f3c902;">
                        3
                    </li>
                    <li class="list-inline-item" data-toggle="pill" style="background-color: #ece424;">
                        4
                    </li>
                    <li class="list-inline-item" data-toggle="pill" style="background-color: #d2ea22;">
                        5
                    </li>
                    <li class="list-inline-item" data-toggle="pill" style="background-color: #1acb6e;">
                        6
                    </li>
                    <li class="list-inline-item" data-toggle="pill" style="background-color: #11a658;">
                        7
                    </li>
                </ul>
            </div>
            <div class="grid_dtails_data">
                <h3>New Concept</h3>
                <ul class="list-inline"> 
                    <li class="list-inline-item">
                        <h4>Name</h4>
                        <p>john wick</p>
                    </li>
                    <li class="list-inline-item">
                       <h4>Submitted</h4>
                       <p class="date_cl_n">2021-10-16 10:59:54</p>
                   </li>
                   <li class="list-inline-item">
                    <h4>Category</h4>
                    <label class="lable_new_cl" style="background-color: #8c5c5c;">Data Solution</label>
                </li>
                <li class="list-inline-item">
                   <h4>Stage</h4>
                   <label class="lable_new_cl" style="background-color: #546cf1;">Archive</label>
               </li>
               <li class="list-inline-item">
                   <h4>Status</h4>
                   <label class="lable_new_cl" style="background-color: #cadd2d;">New Concept</label>
               </li>
               <li class="list-inline-item">
                <h4>Number of Votes</h4>
                <p><b>0</b></p>
            </li>
        </ul>
    </div>   
</div>
</div>
</div>
</div>
<div class="col-lg-7 col-sm-7 col_dif_2">
    <div class="panel_s">
        <div class="panel-body">
           <div class="grid_view_datails_tab">
              <ul class="nav nav-pills tab_header_d" role="tablist">
               <li class="nav-item active">
                   <a class="nav-link " data-toggle="pill" href="#description_tb"><i class="fa fa-align-left"></i> Description</a>
               </li>
               <li class="nav-item">
                   <a class="nav-link" data-toggle="pill" href="#attachement_tb"><i class="fa fa-paperclip"></i> Attachement</a>
               </li>
               <li class="nav-item">
                   <a class="nav-link" data-toggle="pill" href="#business_tb"><i class="fa fa-briefcase" ></i> Business</a>
               </li>
               <li class="nav-item">
                   <a class="nav-link" data-toggle="pill" href="#impactgoal_tb"><i class="fa fa-life-ring"></i> Impact Goal</a>
               </li>
               <li class="nav-item">
                   <a class="nav-link" data-toggle="pill" href="#additional_info"><i class="fa fa-info-circle"></i> Additional Info</a>
               </li>
               <li class="nav-item">
                   <a class="nav-link" data-toggle="pill" href="#comment_tb"><i class="fa fa-commenting-o"></i> Comment</a>
               </li>
           </ul>
           <!-- Tab panes -->
           <div class="tab-content">
               <div id="description_tb" class=" tab-pane active">
                 <div class="grid_tab_data">
                     <h1>Generate the latest CRM report for company projects</h1>
                     <div class="lable_wrap_details">
                         <label>Lable 1</label>
                         <label>Lable 2</label>
                         <label>Lable 3</label>
                         <label>Lable 4</label>
                         <label>Lable 5</label>
                         <label>Lable 6</label>
                     </div>
                     <h1>Download file</h1>
                     <ul class="list-inline attachement_file_list">
                        <li class="list-inline-item">
                            <div class="attachment_data_wrap">
                                <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/image_dome.png" class="img-responsive" alt="Image">
                                <p>File Name <i class="fa fa-cloud-download"></i></p>
                            </div>
                        </li>
                        <li class="list-inline-item">
                            <div class="attachment_data_wrap">
                                <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/excel.png" class="img-responsive" alt="Image">
                                <p>File Name <i class="fa fa-cloud-download"></i></p>
                            </div>
                        </li>
                        <li class="list-inline-item">
                            <div class="attachment_data_wrap">
                                <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/pdf.png" class="img-responsive" alt="Image">
                                <p>File Name <i class="fa fa-cloud-download"></i></p>
                            </div>
                        </li>
                        <li class="list-inline-item">
                            <div class="attachment_data_wrap">
                                <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/image_dome.png" class="img-responsive" alt="Image">
                                <p>File Name <i class="fa fa-cloud-download"></i></p>
                            </div>
                        </li>
                        <li class="list-inline-item">
                            <div class="attachment_data_wrap">
                                <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/pdf.png" class="img-responsive" alt="Image">
                                <p>File Name <i class="fa fa-cloud-download"></i></p>
                            </div>
                        </li>
                        <li class="list-inline-item">
                            <div class="attachment_data_wrap">
                                <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/image_dome.png" class="img-responsive" alt="Image">
                                <p>File Name <i class="fa fa-cloud-download"></i></p>
                            </div>
                        </li>
                        <li class="list-inline-item">
                            <div class="attachment_data_wrap">
                                <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/excel.png" class="img-responsive" alt="Image">
                                <p>File Name <i class="fa fa-cloud-download"></i></p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div id="attachement_tb" class=" tab-pane fade">
              <div class="grid_tab_data">
                 <h1>Attachement</h1>
                 <ul class="list-inline attachement_file_list">
                    <li class="list-inline-item">
                        <div class="attachment_data_wrap">
                            <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/image_dome.png" class="img-responsive" alt="Image">
                            <p>File Name <i class="fa fa-cloud-download"></i></p>
                        </div>
                    </li>
                    <li class="list-inline-item">
                        <div class="attachment_data_wrap">
                            <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/excel.png" class="img-responsive" alt="Image">
                            <p>File Name <i class="fa fa-cloud-download"></i></p>
                        </div>
                    </li>
                    <li class="list-inline-item">
                        <div class="attachment_data_wrap">
                            <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/pdf.png" class="img-responsive" alt="Image">
                            <p>File Name <i class="fa fa-cloud-download"></i></p>
                        </div>
                    </li>
                    <li class="list-inline-item">
                        <div class="attachment_data_wrap">
                            <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/image_dome.png" class="img-responsive" alt="Image">
                            <p>File Name <i class="fa fa-cloud-download"></i></p>
                        </div>
                    </li>
                    <li class="list-inline-item">
                        <div class="attachment_data_wrap">
                            <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/pdf.png" class="img-responsive" alt="Image">
                            <p>File Name <i class="fa fa-cloud-download"></i></p>
                        </div>
                    </li>
                    <li class="list-inline-item">
                        <div class="attachment_data_wrap">
                            <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/image_dome.png" class="img-responsive" alt="Image">
                            <p>File Name <i class="fa fa-cloud-download"></i></p>
                        </div>
                    </li>
                    <li class="list-inline-item">
                        <div class="attachment_data_wrap">
                            <img src="http://localhost/perfex_fresh/modules/idea_hub/assets/img/excel.png" class="img-responsive" alt="Image">
                            <p>File Name <i class="fa fa-cloud-download"></i></p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div id="business_tb" class=" tab-pane fade">
            <div class="grid_tab_data">
              <h1>Business</h1>
              <ul class="business_list_cl">
                  <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet.</li>
                  <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
                  <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
                  <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
                  <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
                  <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
                  <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
                  <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
              </ul>
          </div>
      </div>
      <div id="impactgoal_tb" class=" tab-pane fade">
       <div class="grid_tab_data">
          <h1>Impact Goal</h1>
          <ul class="business_list_cl">
              <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet.</li>
              <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
              <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
              <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
              <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
              <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
              <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
              <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
          </ul>
      </div>
  </div>
  <div id="additional_info" class=" tab-pane fade">
   <div class="grid_tab_data">
      <h1>Additional Info</h1>
      <ul class="business_list_cl">
          <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet.</li>
          <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
          <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
          <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
          <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
          <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
          <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
          <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit ipsum dolor sit amet ipsum dolor sit amet ipsum dolor sit amet.</li>
      </ul>
  </div>
</div>
<div id="comment_tb" class=" tab-pane fade">
  <div class="grid_tab_data">
      <h1>Comment</h1>
      <div class="">
        <div id="concept-comments"></div>
    </div>
    <input type="hidden" name="concept_id" value="2">
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<?php init_tail(); ?>
<script>
    "use strict";
    jQuery('.dropdown-menu.keep-open').on('click', function (e) {
      e.stopPropagation();
  });
    $("button.ranking_btn").on("click", function(events, selector, data, handler) {
        var concept_id = $(this).parent('div').parent('.concept_ra').attr('data-id');
        var thisObj = $(this);
        var _rank = events.target.innerHTML;
        $.post( admin_url + 'idea_hub/add_update_concept_rank/', {'rank':_rank, 'concept_id':concept_id}, function( res ) {
            let result = JSON.parse(res);
            $('.ac_review').removeClass('ac_review');
            thisObj.parent('div').addClass('ac_review');
            $(".point_count").find('h5').text(result.points);
            $("#vote-count-p").text(result.vote);
        });
    });
    var concept_id = $('input[name="concept_id"]').val();
    var discussion_user_profile_image_url = '';
    var current_user_is_admin = '';
    var get_project_discussions_language_array = '{"discussion_add_comment":"Add comment","discussion_newest":"Newest","discussion_oldest":"Oldest","discussion_attachments":"Attachments","discussion_send":"Send","discussion_reply":"Answer","discussion_edit":"Edit","discussion_edited":"Modified","discussion_you":"You","discussion_save":"Save","discussion_delete":"Delete","discussion_view_all_replies":"Show all replies","discussion_hide_replies":"Hide replies","discussion_no_comments":"No comments","discussion_no_attachments":"No attachments","discussion_attachments_drop":"Drag and drop to upload file"}';
    if(typeof(concept_id) != 'undefined'){
        discussion_comments('#concept-comments',concept_id,'regular');
    }
    function discussion_comments(selector,concept_id,discussion_type){
        var defaults = _get_jquery_comments_default_config({"discussion_add_comment":"Add comment","discussion_newest":"Newest","discussion_oldest":"Oldest","discussion_attachments":"Attachments","discussion_send":"Send","discussion_reply":"Answer","discussion_edit":"Edit","discussion_edited":"Modified","discussion_you":"You","discussion_save":"Save","discussion_delete":"Delete","discussion_view_all_replies":"Show all replies","discussion_hide_replies":"Hide replies","discussion_no_comments":"No comments","discussion_no_attachments":"No attachments","discussion_attachments_drop":"Drag and drop to upload file"});
        var options = {
            wysiwyg_editor: {
                opts: {
                    enable: true,
                    is_html: true,
                    container_id: 'editor-container',
                    comment_index: 0,
                },
                init: function (textarea, content) {
                    var comment_index = textarea.data('comment_index');
                    var editorConfig = _simple_editor_config();
                    editorConfig.setup = function(ed) {
                        textarea.data('wysiwyg_editor', ed);
                        ed.on('change', function() {
                          var value = ed.getContent();
                          if (value !== ed._lastChange) {
                            ed._lastChange = value;
                            textarea.trigger('change');
                        }
                    });
                        ed.on('keyup', function() {
                            var value = ed.getContent();
                            if (value !== ed._lastChange) {
                                ed._lastChange = value;
                                textarea.trigger('change');
                            }
                        });
                        ed.on('Focus', function (e) {
                            textarea.trigger('click');
                        });
                        ed.on('init', function() {
                            if (content) ed.setContent(content);
                        });
                    }
                    var editor = init_editor('#'+ this.get_container_id(comment_index), editorConfig)
                },
                get_container: function (textarea) {
                    if (!textarea.data('comment_index')) {
                        textarea.data('comment_index', ++this.opts.comment_index);
                    }
                    return $('<div/>', {
                        'id': this.get_container_id(this.opts.comment_index)
                    });
                },
                get_contents: function(editor) {
                  return editor.getContent();
              },
              on_post_comment: function(editor, evt) {
                 editor.setContent('');
             },
             get_container_id: function(comment_index) {
                var container_id = this.opts.container_id;
                if (comment_index) container_id = container_id + "-" + comment_index;
                return container_id;
            }
        },
        currentUserIsAdmin:current_user_is_admin,
        getComments: function(success, error) {
            $.get(admin_url + 'idea_hub/get_concept_comments/'+concept_id+'/'+discussion_type,function(response){
              success(response);
          },'json');
        },
        postComment: function(commentJSON, success, error) {
            $.ajax({
              type: 'post',
              url: admin_url + 'idea_hub/add_discussion_comment/'+concept_id+'/'+discussion_type,
              data: commentJSON,
              success: function(comment) {
                comment = JSON.parse(comment);
                success(comment)
            },
            error: error
        });
        },
        putComment: function(commentJSON, success, error) {
            $.ajax({
                type: 'post',
                url: admin_url + 'idea_hub/update_discussion_comment',
                data: commentJSON,
                success: function(comment) {
                    comment = JSON.parse(comment);
                    success(comment)
                },
                error: error
            });
        },
        deleteComment: function(commentJSON, success, error) {
            $.ajax({
                type: 'post',
                url: admin_url + 'idea_hub/delete_discussion_comment/'+commentJSON.id,
                success: success,
                error: error
            });
        },
        uploadAttachments: function(commentArray, success, error) {
            var responses = 0;
            var successfulUploads = [];
            var serverResponded = function() {
                responses++;
                if(responses == commentArray.length) {
                    if(successfulUploads.length == 0) {
                      error();
                  } else {
                    successfulUploads = JSON.parse(successfulUploads);
                    success(successfulUploads)
                }
            }
        }
        $(commentArray).each(function(index, commentJSON) {
            var formData = new FormData();
            if(commentJSON.file.size && commentJSON.file.size > app.max_php_ini_upload_size_bytes){
               alert_float('danger',"The uploaded file exceeds the upload_max_filesize directive in php.ini");
               serverResponded();
           }else{
            $(Object.keys(commentJSON)).each(function(index, key) {
                var value = commentJSON[key];
                if(value) formData.append(key, value);
            });
            if(typeof(csrfData) !== 'undefined') {
                formData.append(csrfData['token_name'], csrfData['hash']);
            }
            $.ajax({
                url: admin_url + 'idea_hub/add_discussion_comment/'+concept_id+'/'+discussion_type,
                type: 'POST',
                data: formData,
                cache: false,
                contentType: false,
                processData: false,
                success: function(commentJSON) {
                    successfulUploads.push(commentJSON);
                    serverResponded();
                },
                error: function(data) {
                 var error = JSON.parse(data.responseText);
                 alert_float('danger',error.message);
                 serverResponded();
             },
         });
        }
    });
    }
}
var settings = $.extend({}, defaults, options);
$(selector).comments(settings);
}
</script>
</body>
</html>